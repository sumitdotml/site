<script is:inline>
	(function initializeTheme() {
		try {
			const stored =
				typeof localStorage !== "undefined"
					? localStorage.getItem("theme")
					: null;
			const prefersDark =
				typeof window !== "undefined" &&
				window.matchMedia &&
				window.matchMedia("(prefers-color-scheme: dark)").matches;
			const theme = stored ?? (prefersDark ? "dark" : "light");
			document.documentElement.setAttribute("data-theme", theme);
		} catch (error) {
			console.error("Theme initialization failed:", error);
		}
	})();
</script>
